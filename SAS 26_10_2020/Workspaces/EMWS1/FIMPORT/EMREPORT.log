*------------------------------------------------------------*
* Log dei report
Data:               23 ottobre 2020
Ora:                19:03:09
*------------------------------------------------------------*
17103  %let EMEXCEPTIONSTRING=;
17104  *------------------------------------------------------------*;
17105  * REPORT: FIMPORT;
17106  *------------------------------------------------------------*;
17107  %let EM_ACTION = REPORT;
17108  %let syscc = 0;
17109  /* Fimport.source */
17110  %macro main;
17111        %if %upcase(&EM_ACTION) = CREATE %then %do;
17112           filename temp catalog 'sashelp.emsamp.Fimport_create.source';
17113           %include temp;
17114           filename temp;
17115           %create;
17116        %end;
17117        %else
17118        %if %upcase(&EM_ACTION) = TRAIN %then %do;
17119           filename temp catalog 'sashelp.emsamp.Fimport_train.source';
17120           %include temp;
17121           filename temp;
17122           %train;
17123        %end;
17124        %else
17125        %if %upcase(&EM_ACTION) = UPDATE %then %do;
17126           filename temp catalog 'sashelp.emsamp.Fimport_update.source';
17127           %include temp;
17128           filename temp;
17129           %update;
17130        %end;
17131        %else
17132        %if %upcase(&EM_ACTION) = PROPERTY %then %do;
17133           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17134           %include temp;
17135           filename temp;
17136           %property;
17137        %end;
17138         %else
17139        %if %upcase(&EM_ACTION) = SCORE %then %do;
17140           filename temp catalog 'sashelp.emsamp.Fimport_score.source';
17141           %include temp;
17142           filename temp;
17143           %score;
17144        %end;
17145        %else
17146        %if %upcase(&EM_ACTION) = REPORT %then %do;
17147           filename temp catalog 'sashelp.emsamp.Fimport_report.source';
17148           %include temp;
17149           filename temp;
17150           %report;
17151        %end;
17152        %else
17153        %if %upcase(&EM_ACTION) = OPENVARIABLESET %then %do;
17154           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17155           %include temp;
17156           filename temp;
17157           %openvariableset;
17158        %end;
17159        %else
17160        %if %upcase(&EM_ACTION) = CLOSEVARIABLESET %then %do;
17161           filename temp catalog 'sashelp.emsamp.Fimport_actions.source';
17162           %include temp;
17163           filename temp;
17164           %closevariableset;
17165        %end;
17166  %mend main;
17167  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMSAMP.FIMPORT_REPORT.SOURCE.
17168 +%macro report;
17169 +    %em_getname(key=EMSTAT,     type=DATA);
17170 +    %em_getname(key=EMINFO,     type=DATA);
17171 +    %em_getname(key=CLASS,      type=DATA);
17172 +    %em_getname(key=INTERVAL,   type=DATA);
17173 +
17174 +    %em_REPORT(key=EMSTAT,   viewtype=DATA, description=EMSTAT, block=Report, autodisplay=Y);
17175 +    %em_REPORT(key=INTERVAL, viewtype=LATTICE, LATTICETYPE=HISTOGRAM, LATTICEX=VARIABLE, DISCRETEX=Y, X=VALUE,FREQ=PERCENT,block=Report, description=INTERVALTARGET, autodisplay=N);
17176 +    %em_REPORT(key=CLASS, viewtype=LATTICE, LATTICEtype=BAR, LATTICEX=VARIABLE, X=VALUE,FREQ=PERCENT, block=Report, description=CLASSTARGET, autodisplay=Y);
17177 +
17178 +    %if &em_property_summarize eq Y %then %do;
17179 +        filename temp catalog 'sashelp.emmeta.emadvisestatistics.source';
17180 +        %include temp;
17181 +        filename temp;
17182 +
17183 +        data work.tempmeta;
17184 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17185 +           if ROLE='TARGET' and LEVEL ne 'INTERVAL' then output;
17186 +         run;
17187 +
17188 +        %class_profile(DATA=&em_export_train, OUTPUT=&em_user_class, VARS=,
17189 +                      METADATA=tempmeta, STAT=_STAT, FREQ=);
17190 +
17191 +         data work.tempmeta;
17192 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17193 +            if ROLE='TARGET' and LEVEL eq 'INTERVAL' then output;
17194 +         run;
17195 +         %var_profile(DATA=&em_export_train, OUTPUT=&em_user_INTERVAL, VARS=, METADATA=tempmeta, COMPUTESTAT=Y, STAT=_STAT, FREQ=,
17196 +                   BINDATA=, BIN=Y, NUMBARS=8, MINMAX=N);
17197 +
17198 +        data work.tempmeta;
17199 +           set &em_lib..&em_nodeid._CMETA_TRAIN;
17200 +        run;
17201 +
17202 +        %if "&em_property_advancedadvisor" eq "N" %then %do;
17203 +            %EmAdviseStat(&em_export_train, maxClassLevels=32, metadata=tempmeta, statisticData=&em_user_emstat);
17204 +
17205 +            data &em_data_exportset;
17206 +                 set &em_data_exportset;
17207 +                 if NODEPORT='TRAIN' then do;
17208 +                    EMINFO="&em_data_eminfo";
17209 +                    EMINFOMODTIME=datetime();
17210 +                 end;
17211 +            run;
17212 +        %end;
17213 +        %else %do;
17214 +            %em_getname(key=EMSTATDEFAULT,     type=DATA);
17215 +            %if %sysfunc(exist(&em_user_emstatdefault)) %then %do;
17216 +                data &em_user_emstat /  view=&em_user_emstat;
17217 +                   set &em_user_emstatdefault;
17218 +                run;
17219 +            %end;
17220 +        %end;
17221 +    %end;
17222 +    %else %do;
17223 +        %if "&em_property_advancedadvisor" eq "N" %then %do;
17224 +            proc datasets lib=&em_lib nolist;
17225 +               delete &em_nodeid._EMINFO;
17226 +            run;
17227 +            quit;
17228 +            data &em_data_exportset;
17229 +                 set &em_data_exportset;
17230 +                 if NODEPORT='TRAIN' then do;
17231 +                    EMINFO="";
17232 +                    EMINFOMODTIME=.;
17233 +                 end;
17234 +            run;
17235 +        %end;
17236 +    %end;
17237 +
17238 +    data &em_data_exportset;
17239 +       set &em_data_exportset;
17240 +       if NODEPORT='TRAIN' then do;
17241 +          ROLE="&em_property_role";
17242 +       end;
17243 +    run;
17244 +
17245 +    %if %sysfunc(exist(&em_data_variableSet)) %then %do;
17246 +        proc freq data=&em_data_variableset noprint;
17247 +             table ROLE*LEVEL/out=work.tempMeta;
17248 +        run;
17249 +        proc print data=work.tempmeta label noobs;
17250 +           var ROLE LEVEL COUNT;
17251 +           label ROLE  = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))"
17252 +                 LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))"
17253 +                 COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
17254 +        title9  ' ';
17255 +        title10  "%sysfunc(sasmsg(sashelp.dmine, rpt_exptattributes_title, NOQUOTE, TRAIN))";
17256 +        run;
17257 +        title10;
17258 +    %end;
17259 +
17260 +    %if %sysfunc(exist(work.tempmeta)) %then %do;
17261 +        proc datasets lib=work nolist;
17262 +           delete tempmeta;
17263 +        run;
17264 +        quit;
17265 +    %end;
17266 +
17267 +%mend report;
17268 +
17269 +
17270 +
17271 +
17272 +
17273 +
17274 +
17275 +
17276 +
17277 +
17278 +
17279 +
17280 +
17281 +
17282 +
17283 +
17284 +
17285 +
17286 +
17287 +
17288 +
17289 +
17290 +
17291 +
17292 +
17293 +
17294 +
17295 +
17296 +
17297 +
17298 +
17299 +
17300 +
17301 +
17302 +
17303 +
17304 +
17305 +
17306 +
17307 +
17308 +
17309 +
17310 +
17311 +
17312 +
17313 +
17314 +
17315 +
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.

NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      


NOTE: There were 132 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 264 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
      


NOTE: There were 264 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 396 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      


NOTE: The file EMWS1.FIMPORT_EMINFO (memtype=DATA) was not found, but appears on a DELETE statement.

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      


NOTE: There were 6 observations read from the data set EMWS1.FIMPORT_EXPORTSET.
NOTE: The data set EMWS1.FIMPORT_EXPORTSET has 6 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 6 observations read from the data set EMWS1.FIMPORT_EXPORTSET.
NOTE: The data set EMWS1.FIMPORT_EXPORTSET has 6 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 40 observations read from the data set EMWS1.FIMPORT_VARIABLESET.
NOTE: The data set WORK.TEMPMETA has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      


NOTE: There were 4 observations read from the data set WORK.TEMPMETA.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: Deleting WORK.TEMPMETA (memtype=DATA).

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

17316  *------------------------------------------------------------*;
17317  * End REPORT: FIMPORT;
17318  *------------------------------------------------------------*;

17319  /* Reset EM Options */
17320  options formchar="|----|+|---+=|-/\<>*";
17321  options nocenter ls=256 ps=10000;
17322  goptions reset=all device=GIF NODISPLAY;

17323  proc sort data=WORK.EM_USER_REPORT;
17324  by ID VIEW;
17325  run;

NOTE: There were 396 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 396 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

