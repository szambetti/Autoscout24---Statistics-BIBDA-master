*------------------------------------------------------------*
* Log di scoring
Data:               25 ottobre 2020
Ora:                22:54:21
*------------------------------------------------------------*
NOTE: Visualizza EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      
NOTE: Visualizza EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.14 seconds
      cpu time            0.14 seconds
      
12928  /* Generate assessment metadata, which will be used to generate assessment data step */
12929  /* code, such as retrieving names of temporary variables and summary variables,      */
12930  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
12931  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
12932  /* computation.                                                                      */
12933  data work.ASSESS_1VGP27E_assessMeta_y8AGHC;
12934  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100 RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32
12934! RESULT_MAX_LABEL
12935     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32;
12936  VARIABLE = "target10";
12937  PARENT = "";
12938  FORMAT = "";
12939  TYPE = "";
12940  LEVEL = '';
12941  PROPERTY = "TARGET";
12942  MEASUREMENT = "BINARY";
12943  LAST_LEVEL = '';
12944  GEN_VAR_IN_TEMP_DATA = "target10";
12945  RESULT_MEAN = "";
12946  RESULT_MEAN_LABEL = "";
12947  RESULT_MIN = "";
12948  RESULT_MIN_LABEL = "";
12949  MIN_ADJUSTED = "";
12950  RESULT_MAX = "";
12951  RESULT_MAX_LABEL = "";
12952  MAX_ADJUSTED = "";
12953  RESULT_COUNT = "";
12954  RESULT_COUNT_LABEL = "";
12955  TEMPORARY_VARIABLE = "target10_AhrAwE19Ui7B6wZ";
12956  output;
12957  VARIABLE = "F_target10_1";
12958  FORMAT = "";
12959  TYPE = "";
12960  PARENT = "F_target10";
12961  LEVEL = "1";
12962  PROPERTY = "TARGET_LEVEL";
12963  MEASUREMENT = "INTERVAL";
12964  LAST_LEVEL = "0";
12965  GEN_VAR_IN_TEMP_DATA = "F_target10_1_CRglSef7fzhfqoE";
12966  RESULT_MEAN = "F_target10_mean_txyJm2H_69rX1ve";
12967  /* adjust for tied cases */
12968  RESULT_MEAN_LABEL = "";
12969  RESULT_MIN = "";
12970  RESULT_MIN_LABEL = "";
12971  RESULT_MAX = "";
12972  RESULT_MAX_LABEL = "";
12973  RESULT_COUNT = "NumberOfEvents";
12974  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12975  TEMPORARY_VARIABLE = "F_target10_1_mqj_DZfhfbzVhqi";
12976  output;
12977  VARIABLE = "F_target10_0";
12978  FORMAT = "";
12979  TYPE = "";
12980  PARENT = "F_target10";
12981  LEVEL = "0";
12982  PROPERTY = "TARGET_LEVEL";
12983  MEASUREMENT = "INTERVAL";
12984  LAST_LEVEL = "0";
12985  GEN_VAR_IN_TEMP_DATA = "F_target10_0_JwS2mTnuylgoFom";
12986  RESULT_MEAN = "F_target10_mean_uXRv_gDF6TzYErQ";
12987  /* adjust for tied cases */
12988  RESULT_MEAN_LABEL = "";
12989  RESULT_MIN = "";
12990  RESULT_MIN_LABEL = "";
12991  RESULT_MAX = "";
12992  RESULT_MAX_LABEL = "";
12993  RESULT_COUNT = "NumberOfEvents";
12994  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
12995  TEMPORARY_VARIABLE = "F_target10_0_J7h08iuKrmoAwWQ";
12996  output;
12997  VARIABLE = "P_target101";
12998  FORMAT = "";
12999  TYPE = "";
13000  PARENT = "";
13001  LEVEL = "1";
13002  PROPERTY = "POSTERIOR_LEVEL";
13003  MEASUREMENT = "INTERVAL";
13004  LAST_LEVEL = "";
13005  GEN_VAR_IN_TEMP_DATA = "P_target101";
13006  RESULT_MEAN = "_meanP_";
13007  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
13008  RESULT_MIN = "_minP_";
13009  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
13010  MIN_ADJUSTED = "P_target_minAdjusted_l95m_LlZ4";
13011  RESULT_MAX = "_maxP_";
13012  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
13013  MAX_ADJUSTED = "P_target_maxAdjusted_r_z7KPNyx";
13014  RESULT_COUNT = "";
13015  RESULT_COUNT_LABEL = "";
13016  TEMPORARY_VARIABLE = "P_target101_EJUvhprh1YCpeoP";
13017  output;
13018  VARIABLE = "P_target100";
13019  FORMAT = "";
13020  TYPE = "";
13021  PARENT = "";
13022  LEVEL = "0";
13023  PROPERTY = "POSTERIOR_LEVEL";
13024  MEASUREMENT = "INTERVAL";
13025  LAST_LEVEL = "";
13026  GEN_VAR_IN_TEMP_DATA = "P_target100";
13027  RESULT_MEAN = "_meanP_";
13028  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
13029  RESULT_MIN = "_minP_";
13030  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
13031  MIN_ADJUSTED = "P_target_minAdjusted_jRxifEnY1";
13032  RESULT_MAX = "_maxP_";
13033  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
13034  MAX_ADJUSTED = "P_target_maxAdjusted_h43BoWzYJ";
13035  RESULT_COUNT = "";
13036  RESULT_COUNT_LABEL = "";
13037  TEMPORARY_VARIABLE = "P_target100_SBr2gb8O4KZsNQq";
13038  output;
13039  run;

NOTE: The data set WORK.ASSESS_1VGP27E_ASSESSMETA_Y8AGHC has 5 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.01 seconds
      

13040  /* Generate temporary dataset and obtain summary statistics such as total number of   */
13041  /* obserations, frequency of target.  However, summary statistics for class reporting */
13042  /* variabels are not computed here since if there exist class reporting variables,    */
13043  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
13044  /* summary statisitcs, if any.                                                        */
13045  data work.ASSESS_1VGP27E_normSD_SICy4A(drop=
13046  _numberOfObservation_
13047  _levelFrequency_1
13048  _levelFrequency_2
13049  )
13050  work.ASSESS_1VGP27E_meansAndTi_KOSEfT (keep=
13051  _numberOfObservation_
13052  _levelFrequency_1
13053  _levelFrequency_2
13054  );
13055  set EMWS1.Tree_TRAIN(
13056  where=(
13057  (target10 ^= .)
13058  )
13059  ) end=_lastObservation_;
13060  keep frequency_SosBRj;
13061  frequency_SosBRj = 1;
13062  keep I_target10 F_target10;
13063  keep F_target10_1_CRglSef7fzhfqoE;
13064  if (F_target10 = '1') then do;
13065  F_target10_1_CRglSef7fzhfqoE = 1;
13066  end;
13067  else do;
13068  F_target10_1_CRglSef7fzhfqoE = 0;
13069  end;
13070  keep F_target10_0_JwS2mTnuylgoFom;
13071  if (F_target10 = '0') then do;
13072  F_target10_0_JwS2mTnuylgoFom = 1;
13073  end;
13074  else do;
13075  F_target10_0_JwS2mTnuylgoFom = 0;
13076  end;
13077  keep P_target101;
13078  keep P_target100;
13079  output work.ASSESS_1VGP27E_normSD_SICy4A;
13080  keep _numberOfObservation_;
13081  retain _numberOfObservation_ 0;
13082  _numberOfObservation_ + frequency_SosBRj;
13083  keep _levelFrequency_1;
13084  retain _levelFrequency_1 0;
13085  if (F_target10 = '1') then do;
13086  _levelFrequency_1 + frequency_SosBRj;
13087  end;
13088  keep _levelFrequency_2;
13089  retain _levelFrequency_2 0;
13090  if (F_target10 = '0') then do;
13091  _levelFrequency_2 + frequency_SosBRj;
13092  end;
13093  if _lastObservation_ then do;
13094  output work.ASSESS_1VGP27E_meansAndTi_KOSEfT;
13095  end;
13096  run;

NOTE: Variable _WARN_ is uninitialized.
NOTE: There were 4743 observations read from the data set EMWS1.PART_TRAIN.
NOTE: Visualizza EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
      
NOTE: There were 4743 observations read from the data set EMWS1.REPL_TRAIN.
NOTE: There were 4743 observations read from the data set EMWS1.TREE_TRAIN.
      WHERE target10 not = .;
NOTE: The data set WORK.ASSESS_1VGP27E_NORMSD_SICY4A has 4743 observations and 7 variables.
NOTE: The data set WORK.ASSESS_1VGP27E_MEANSANDTI_KOSEFT has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.11 seconds
      cpu time            0.10 seconds
      

13097  data WORK._EMRANK;
13098  set EMWS1.MdlComp_EMRANK;
13099  where MODEL = "Tree" and TARGET = "target10" and dataRole="TRAIN";
13100  run;

NOTE: There were 20 observations read from the data set EMWS1.MDLCOMP_EMRANK.
      WHERE (MODEL='Tree') and (TARGET='target10') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13101  data work._augment;
13102  do BIN= 1 to 20;
13103  DECILE = BIN*5;
13104  output;
13105  end;
13106  run;

NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

13107  data WORK._EMRANK;
13108  merge WORK._AUGMENT WORK._EMRANK;
13109  by BIN;
13110  run;

NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      

13111  data WORK._EMRANK;
13112  set WORK._EMRANK end=_lastObservation_;
13113  retain _previousMinP_ _previousMaxP_;
13114  retain _group_ 1;
13115  keep event;
13116  keep bin _cutoff_ _group_;
13117  if (bin > 1) then do;
13118  bin = bin - 1;
13119  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
13120  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
13121  /* tied */
13122  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
13123  ));
13124  end;
13125  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
13126  /* next tied */
13127  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
13128  ));
13129  end;
13130  output;
13131  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
13132  * _group_ + 1;
13133  *end;
13134  if (_maxP_ le _previousMinP_ - 1E-6) then do;
13135  _group_ + 1;
13136  end;
13137  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
13138  if (abs(_maxP_ - _minP_) > 1E-6) then do;
13139  _group_ + 1;
13140  end;
13141  end;
13142  bin + 1;
13143  /* correct the previous change */
13144  end;
13145  if (_lastObservation_) then do;
13146  _cutoff_ = .;
13147  output;
13148  end;
13149  _previousMinP_ = _minP_;
13150  _previousMaxP_ = _maxP_;
13151  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

13152  data WORK._EMRANK;
13153  set WORK._EMRANK;
13154  by _group_;
13155  retain _start_;
13156  if (first._group_) then do;
13157  _start_ = _n_;
13158  end;
13159  if (last._group_) then do;
13160  _end_ = _n_;
13161  output;
13162  end;
13163  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 10 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
13164  filename emflow "C:\Users\Maria Vallarelli\Desktop\MASTER SLIDE\STATISTICA\LABORATORIO\AUTOSCOUT\autoscout\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
13165  *------------------------------------------------------------*;
13166  * MdlComp: Scoring TREE_TRAIN data;
13167  *------------------------------------------------------------*;
13168  data EMWS1.MdlComp_TRAIN
13169  / view=EMWS1.MdlComp_TRAIN
13170  ;
13171  set EMWS1.Tree_TRAIN
13172  ;
13173  %inc emflow;
13217  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: Visualizza EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.07 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.09 seconds
      cpu time            0.09 seconds
      

13218  quit;
13219  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

13220  filename emflow "C:\Users\Maria Vallarelli\Desktop\MASTER SLIDE\STATISTICA\LABORATORIO\AUTOSCOUT\autoscout\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
13221  *------------------------------------------------------------*;
13222  * MdlComp: Scoring TREE_VALIDATE data;
13223  *------------------------------------------------------------*;
13224  data EMWS1.MdlComp_VALIDATE
13225  / view=EMWS1.MdlComp_VALIDATE
13226  ;
13227  set EMWS1.Tree_VALIDATE
13228  ;
13229  %inc emflow;
13273  run;

NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: Visualizza EMWS1.TREE_VALIDATE.VIEW used (Total process time):
      real time           0.14 seconds
      cpu time            0.11 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.18 seconds
      cpu time            0.15 seconds
      

13274  quit;
13275  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

13276  *------------------------------------------------------------*;
13277  * MdlComp: Computing metadata for TRAIN data;
13278  *------------------------------------------------------------*;

NOTE: Visualizza EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.16 seconds
      cpu time            0.15 seconds
      
NOTE: Visualizza EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.11 seconds
      cpu time            0.10 seconds
      
NOTE: Visualizza EMWS1.MDLCOMP_VALIDATE.VIEW used (Total process time):
      real time           0.13 seconds
      cpu time            0.12 seconds
      
